---
tags: []
layout: post
title: 关于生成随机字符串的那点事儿
category: 
---
在开发过程中，经常会遇到生成一个随机字符串（有时候要求不能重复），例如生成一个ID，或者生成订单编号等等。
这里只提供一下个人的思考思路，希望可以对后面的人有所帮助。

#### 从最简单的一种情况说起 
*直接使用时间戳生成ID*

在JAVA中我们可以使用如下方式获取时间戳
```java
System.currentTimeMillis()
// 1465900786571
```
在这里，我们获取到的这一长串数字，表示自1970-01-01至当前系统时间的毫秒数。

其实，这个时间戳我们可以直接拿来用，没什么不妥的地方，除了有点LOW。

程序猿们一看就知道这TM是一个时间戳。

#### 怎么把数字转换乘字符串
*装逼 step 1*

首先，0-9共10个数字，最简单的想法就是，找10个字符，建立对应关系，然后数字替换为字符。在这里，我们举例，0-9 对应 a-i，那么我们可以搞一个方法，自动替换之，如下：

```java
    // 0->a 1->b 2->c ... 9->i
    public static String num2str(long num){
        StringBuffer buffer = new StringBuffer();
        while (num>10){
            buffer.append((char) (97+num%10));
            num = num/10;
        }
        return buffer.toString();
    }
```

方法造好了，测试一下

```java
System.out.println(num2str(1465900786571L));
//bhfgihaajfge
```
嗯嗯，看起来不错。

#### 另外一种替换方式
*装逼 step 2 优化替换策略*

上面的例子，只用到了a-i这10个字符串，我们发现还有很多剩余的字母没有用到，是不是感觉有些浪费，而且直觉告诉我们，如果我们用更多的字母来表示数字，可以缩短字符串的长度。

假设，我们使用a-zA-Z区分大小写共52个字母来代替0-9这10个字符，即将10进制转换为全字符表示的52进制。写一个方法

//TODO code

恩，字符串确实缩短了很多。


#### 还能再短些吗
*装逼 step 3 精简时间戳*



#### 到底可以多短
*装逼 step 4*

首先，我们自己要做一个评估，要生成几位的字符串。

举个栗子，如果我们要生成2位的字符串，如果只用0-9数字表示，那么最多只能生成100种不重复的字符串，如果用a-z表示，则最多可以生成26*26=676种字符串。用a-zA-Z区分大小写共52个字母表示，则可以最多生成52*52=2704种字符串。

有句话怎么说的来着，**抛开剂量谈毒性都是耍流氓**。

